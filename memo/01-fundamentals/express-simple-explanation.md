# Express.js 超わかりやすい解説 - 高校生向け

## Express.js って何？

**簡単に言うと**: ウェブサイトを作るための道具箱です！

普通にHTMLファイルを作っただけだと、静的（変わらない）なページしか作れません。
でもExpress.jsを使うと、ユーザーの操作に応じて内容が変わる動的なウェブサイトが作れます。

## 身近な例で理解しよう

### レストランで例えると...

```
お客さん（ブラウザ） → レストラン（Express.js サーバー）

1. お客さんが入店（ウェブサイトにアクセス）
2. 受付係（ミドルウェア）が案内
3. ウェイター（ルーター）が注文を聞く
4. 料理人（エンドポイント）が料理を作る
5. ウェイターが料理を運ぶ（レスポンス）
```

## 各部分を詳しく見てみよう

### 1. サーバー = レストランの建物

```
┌─────────────────────┐
│    レストラン        │
│  (Express.js サーバー) │
│                   │
│  営業時間: 24時間   │
│  住所: localhost:3000 │
│                   │
│  「いらっしゃいませ！」│
└─────────────────────┘
```

**役割**: お客さん（ブラウザ）からの注文（リクエスト）を24時間受け付ける

### 2. ミドルウェア = 受付係・案内係

```
お客さん → 受付係1 → 受付係2 → ウェイター → 料理人
           ↓         ↓        ↓       ↓
        身だしなみ   座席案内   注文受付  料理作成
        チェック
```

**受付係1 (express.json())**: 
- 「注文内容をちゃんと理解できる形にしますね」
- お客さんの複雑な注文（JSON）をわかりやすく翻訳

**受付係2 (express.static())**:
- 「写真メニューはこちらです」
- 画像やCSSファイルなどをすぐに提供

### 3. ルーター = ウェイター（注文受付）

```
ウェイター: 「何にしますか？」

お客さん: 「メニューを見せて」
ウェイター: 「こちらです」 → GET '/' → メニュー（index.html）を提供

お客さん: 「お店は営業してる？」  
ウェイター: 「はい、元気です！」 → GET '/api/health' → 営業状況を報告
```

**役割**: お客さんの要求に応じて、適切なサービス（機能）につなげる

### 4. エンドポイント = 料理人・サービス提供者

```
┌─────────────────┐
│   料理人        │
│                │
│ 「何を作りましょう？」│
│                │
│ • ハンバーガー   │
│ • サラダ       │
│ • ドリンク     │
└─────────────────┘
```

**役割**: 実際にお客さんが欲しいもの（データ、ページ）を作って提供

### 5. ヘルスチェック = お店の営業確認

```
お客さん: 「お店開いてる？」
お店: 「はい！元気に営業中です！」

実際のやりとり:
リクエスト: GET /api/health
レスポンス: {"status": "OK", "message": "Server is running"}
```

## 実際の流れを追ってみよう

### シーン1: ホームページを見たい時

```
1. あなた: ブラウザで「localhost:3000」と入力
   ↓
2. Express サーバー: 「いらっしゃいませ！」
   ↓
3. 受付係1: 「特に翻訳する注文はないですね」
   ↓
4. 受付係2: 「メニュー表（静的ファイル）をお探しですか？あ、違いますね」
   ↓
5. ウェイター: 「トップページですね！料理人さん！」
   ↓
6. 料理人: 「index.htmlをお持ちしました！」
   ↓
7. あなた: ブラウザにメモアプリのページが表示される
```

### シーン2: お店が営業しているか確認したい時

```
1. あなた: 「localhost:3000/api/health」にアクセス
   ↓
2. ウェイター: 「営業状況の確認ですね！」
   ↓
3. 料理人: 「{"status": "OK", "message": "Server is running"}」
   ↓
4. あなた: 「お店は元気に営業中だ！」
```

## コードと実際の対応

### レストラン開店準備のコード
```javascript
const express = require('express');  // レストランチェーンと契約
const app = express();              // 新しいレストランを開店

// 受付係を雇う
app.use(express.json());           // 通訳スタッフ
app.use(express.static('public')); // メニュー配布スタッフ

// ウェイターの教育
app.get('/', (req, res) => {       // 「メニューください」への対応
    res.sendFile('index.html');
});

app.get('/api/health', (req, res) => { // 「営業してますか？」への対応
    res.json({status: 'OK', message: 'Server is running'});
});

// 開店！
app.listen(3000, () => {
    console.log('レストラン開店しました！port 3000で営業中');
});
```

## なぜこの仕組みが便利なの？

### 1. 役割分担ができる
- 受付係: 準備作業
- ウェイター: 注文の振り分け  
- 料理人: 実際のサービス提供

それぞれが専門的な仕事をするので効率的！

### 2. 拡張しやすい
```
今: ウェイター1人（2種類の注文に対応）
将来: ウェイター5人（10種類の注文に対応）

新しいメニュー（機能）を簡単に追加できる！
```

### 3. 管理しやすい
```
問題発生時:
「注文が通らない」 → ウェイターの問題？
「料理が出てこない」 → 料理人の問題？

どこで問題が起きているかわかりやすい！
```

## 実際に使われている場面

### SNSアプリの場合
```
- 投稿する → POST /api/posts （新しい投稿を作成）
- 投稿を見る → GET /api/posts （投稿一覧を取得）
- いいね → PUT /api/posts/123/like （投稿にいいね）
- 削除 → DELETE /api/posts/123 （投稿を削除）
```

### ショッピングサイトの場合
```
- 商品一覧 → GET /api/products （商品を表示）
- カート追加 → POST /api/cart （カートに商品追加）
- 注文 → POST /api/orders （注文処理）
- 注文履歴 → GET /api/orders （過去の注文を表示）
```

## まとめ

**Express.js は...**

1. **レストランみたいなもの** - お客さん（ユーザー）にサービスを提供
2. **役割分担がしっかりしている** - 受付、案内、料理人がそれぞれ専門的な仕事
3. **拡張しやすい** - 新しいメニュー（機能）を簡単に追加できる
4. **管理しやすい** - 問題が起きた時にどこが原因かわかりやすい

今回作っているメモアプリも、この仕組みを使って：
- メモを作る
- メモを見る  
- メモを編集する
- メモを削除する

という「サービス」をユーザーに提供しているんです！

**次回予告**: 今はまだ「営業準備中」の状態です。次はデータベース（食材倉庫）を追加して、本格的にメモを保存できるレストラン（アプリ）にしていきます！